<!DOCTYPE html>
<html lang="en">
<script src="/js/lunr.min.js"></script><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Volatile nie nale≈ºy siƒô baƒá | Consdata - blog techniczny</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Volatile nie nale≈ºy siƒô baƒá" />
<meta name="author" content="mmergo" />
<meta property="og:locale" content="pl" />
<meta name="description" content="S≈Çowo kluczowe volatile wydaje siƒô jednym z najrzadziej stosowanych, ale te≈º najbardziej tajemniczych i najs≈Çabiej poznanych s≈Ç√≥w kluczowych w Javie. Do czego wiƒôc s≈Çu≈ºy i czy jest siƒô czego baƒá?" />
<meta property="og:description" content="S≈Çowo kluczowe volatile wydaje siƒô jednym z najrzadziej stosowanych, ale te≈º najbardziej tajemniczych i najs≈Çabiej poznanych s≈Ç√≥w kluczowych w Javie. Do czego wiƒôc s≈Çu≈ºy i czy jest siƒô czego baƒá?" />
<link rel="canonical" href="https://blog.consdata.tech/en/2021/05/31/slowo-kluczowe-volatile.html" />
<meta property="og:url" content="https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html" />
<meta property="og:site_name" content="Consdata - blog techniczny" />
<meta property="og:image" content="https://blog.consdata.tech/assets/img/posts/2021-05-31-slowo-kluczowe-volatile/volatile.jpeg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-05-31T04:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://blog.consdata.tech/assets/img/posts/2021-05-31-slowo-kluczowe-volatile/volatile.jpeg" />
<meta property="twitter:title" content="Volatile nie nale≈ºy siƒô baƒá" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"mmergo"},"@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html"},"description":"S≈Çowo kluczowe volatile wydaje siƒô jednym z najrzadziej stosowanych, ale te≈º najbardziej tajemniczych i najs≈Çabiej poznanych s≈Ç√≥w kluczowych w Javie. Do czego wiƒôc s≈Çu≈ºy i czy jest siƒô czego baƒá?","url":"https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html","image":"https://blog.consdata.tech/assets/img/posts/2021-05-31-slowo-kluczowe-volatile/volatile.jpeg","headline":"Volatile nie nale≈ºy siƒô baƒá","dateModified":"2021-05-31T04:00:00-05:00","datePublished":"2021-05-31T04:00:00-05:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css?family=Raleway:400,700,600,500,300,200,100,800,900" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,600,500,300,200,100,800,900" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@100;400;500;700&display=swap" rel="stylesheet">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" crossorigin="anonymous">
  <link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.consdata.tech/en/feed.xml" title="Consdata - blog techniczny" /><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-NFV6DPR');</script>


  <link rel="icon" type="image/x-icon" href="/en/favicon.ico">
</head>
<body>---
---
<nav class="site-header">
    <div class="container">
        <div class="header navbar-default" role="navigation">
            <div class="header-brand">
                <div class="nav navbar-nav">
                    <div class="nav-link"><a href="/en/">BLOG.CONSDATA.TECH</a></div>
                </div>

                <div class="mobile-search">
                    
<form action="/en/search.html" method="get">

    <div class="search-input-container">
        <input type="text" placeholder="Search..." id="search-box-mobile" name="query" class="search-input" autocomplete="off">
        <i class="fa fa-search search-icon" onclick="expandInputMobile()"></i>
    </div>
</form>

<script>
    const inputMobile = document.getElementById("search-box-mobile");
    const logo = document.getElementById("header-logo");
    const expandInputMobile = () => {
        inputMobile.classList.toggle("expanded");
        logo.classList.toggle("header-logo");
        logo.classList.toggle("logo-invisible");
    };
</script>

                </div>
            </div>
            <div id="header-links" class="mobile-nav">
                <a class="header-logo" href="https://consdata.com/pl">
                    <img src="/assets/img/logo-nowe.png" alt="consdata.com">
                </a>
                <div class="feed-subscribe">
                    <a href="/en/feed.xml">
                    <svg class="svg-icon">
                        <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
                    </svg>
                    </a>
                </div>
                
            </div>

        </div>
    </div>
</nav>
<script>
    function navigate(baseUrl) {
        const queryParams = window.location.search;
        window.location.href = baseUrl + queryParams;
    }
</script>





<div class="navigation-bar">
    <div class="row">
        <div class="col-15 desktop-navbar">
            <div class="col-2-3 navbar-links">
                <div class="navigation-tags">
                    
                        
                        <a href="/en/">
                        
                        PROGRAMMING
                        </a>
                    
                        
                        <a href="/en/">
                        
                        SERVERLESS
                        </a>
                    
                        
                        <a href="/en/">
                        
                        MONGODB
                        </a>
                    
                        
                        <a href="/en/">
                        
                        GCP
                        </a>
                    
                        
                        <a href="/en/">
                        
                        FRONTEND
                        </a>
                    
                </div>
                
<form action="/en/search.html" method="get">

    <div class="search-input-container">
        <input type="text" placeholder="Search..." id="search-box" name="query" class="search-input" autocomplete="off">
        <i class="fa fa-search search-icon" onclick="expandInputDesktop()"></i>
    </div>
</form>

<script>
    const inputDesktop = document.getElementById("search-box");
    const expandInputDesktop = () => {
        inputDesktop.classList.toggle("expanded");
    };
</script>

            </div>
            <div class="col-1-3">
                <a href="https://app2.salesmanago.pl/mscf/e7yrrpjmxbm7bahc/default/Landing_page_newsletter_techniczny.htm"
                   class="newsletter-link">
                    <div class="newsletter-button">
                        Sign up for a tech newsletter
                    </div>
                </a>
            </div>
        </div>
        <div class="col-15 mobile-navbar">
            <div class="navigation-tags">
                
                
                <a href="/en/">
                    
                        PROGRAMMING
                    </a>
                    
                
                <a href="/en/">
                    
                        SERVERLESS
                    </a>
                    
                
                <a href="/en/">
                    
                        MONGODB
                    </a>
                    
                
                <a href="/en/">
                    
                        GCP
                    </a>
                    
                
                <a href="/en/">
                    
                        FRONTEND
                    </a>
                    
            </div>
            <a href="https://app2.salesmanago.pl/mscf/e7yrrpjmxbm7bahc/default/Landing_page_newsletter_techniczny.htm"
               class="newsletter-link">
                <div class="newsletter-button">Sign up for a tech newsletter</div>
            </a>
        </div>
    </div>
</div>
<main class="page-content" aria-label="Content">
    


<div class="blog">
    <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
        <header>
            <div class="row back-link-row">
    <div class="col-15">
        <a href="/en/" class="main-page-link-container">
            <i class="fa fa-arrow-left"></i>
                All posts
        </a>
    </div>
</div>

            <div class="row">
                <div class="col-15">
                    <h1 class="post-big-title p-name" itemprop="name headline">Volatile nie nale≈ºy siƒô baƒá</h1>
                </div>
            </div>
            <div class="row">
                <div class="col-15">
                    <div class="post-metadata">

    <a href="/en/authors/mmergo.html" class="author-name">
        <img class="big-author-image" src="/assets/img/authors/mmergo.webp" alt="author"></a>
    <div class="post-info"><a href="/en/authors/mmergo.html" class="author-name-metadata">Marcin Mergo</a>
        <span>
31

maja



2021
</span>
    </div>


</div>

                </div>
                <div class="col-5">
                    

                </div>
            </div>
        </header>
        <div itemprop="articleBody" class="post-content-container">
            <div class="post-content-left-pane">
                <div class="post-content">
                    <div class=" big-post-tile-did-you-know  post-highlight-image">
                        <img src="/assets/img/posts/2021-05-31-slowo-kluczowe-volatile/volatile.jpeg" alt="postimage"/>
                    </div>
                    <div class="social-media-sharing">
                        <div id="share-bar">
    <div class="share-buttons">
        <a href="https://www.facebook.com/sharer/sharer.php?u=https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html"
           onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
           title="Podziel siƒô na Facebooku">
            <i class="fa fa-facebook-official share-button"></i>
        </a>

        <a href="https://twitter.com/intent/tweet?text=Volatile nie nale≈ºy siƒô baƒá&url=https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html"
           onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
           title="Podziel siƒô na Twitterze">
            <i class="fa fa-twitter share-button"> </i>
        </a>

        <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html&title=Volatile nie nale≈ºy siƒô baƒá&source=Consdata - blog techniczny"
           onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
           title="Podziel siƒô na LinkedIn">
            <i class="fa fa-linkedin share-button"></i>
        </a>

    </div>

</div>

                    </div>
                    <div id="myModal" class="modal">
                        <i id="modal-close" class="fa fa-times close" aria-hidden="true"
                           onclick="closeModal()"></i>
                        <img class="modal-content">
                    </div>
                    <p>S≈Çowo kluczowe <strong>volatile</strong> wydaje siƒô jednym z najrzadziej stosowanych, ale te≈º najbardziej tajemniczych i najs≈Çabiej poznanych s≈Ç√≥w kluczowych w Javie. Do czego wiƒôc s≈Çu≈ºy, i czy jest siƒô czego baƒá?</p>

<p>Na poczƒÖtek nale≈ºy zauwa≈ºyƒá, ≈ºe <strong>volatile</strong> ma zastosowanie jedynie w przypadku zmiennych. Sam typ zmiennej, oraz to, czy jest to typ prosty czy z≈Ço≈ºony, nie ma znaczenia. Przyk≈Çadowe u≈ºycie s≈Çowa <strong>volatile</strong> wyglƒÖda nastƒôpujƒÖco:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">myInt</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</code></pre></div></div>
<p>Volatile ma zastosowanie w przypadku aplikacji wielowƒÖtkowych, i zwiƒÖzane jest z optymalizacjami, kt√≥re wykonuje zar√≥wno procesor, jak i JVM podczas zmiany warto≈õci zmiennych, z kt√≥rych korzysta wiƒôcej ni≈º jeden wƒÖtek. Brzmi skomplikowanie? Wyobra≈∫my sobie sytuacjƒô, w kt√≥rej wƒÖtki <strong>A</strong> oraz <strong>B</strong> majƒÖ dostƒôp do zmiennej <strong>foo</strong>. W przypadku kiedy wƒÖtek <strong>A</strong> zmieni warto≈õci tej zmiennej, zmiana ta niekoniecznie bƒôdzie od razu spropagowana do wƒÖtku <strong>B</strong>! W skrajnym przypadku mo≈ºe nie zostaƒá spropagowana nigdy. Oznacza to, ≈ºe dwa wƒÖtki, odczytujƒÖce pozornie tƒÖ samƒÖ zmiennƒÖ, mogƒÖ widzieƒá dwie rozbie≈ºne warto≈õci. Tyle teorii, kod jest ciekawszy.</p>

<p>≈ªeby lepiej zobrazowaƒá problem, pochylmy siƒô nad poni≈ºszym kawa≈Çkiem kodu:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">class</span> <span class="nc">VolatileExample</span> <span class="o">{</span>
 
    <span class="kd">private</span> <span class="kd">static</span> <span class="kt">int</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
 
    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ThreadSupplier</span> <span class="n">producer</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">(</span><span class="s">"Ustawiam licznik na %s"</span><span class="o">,</span> <span class="o">++</span><span class="n">counter</span><span class="o">));</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>
 
        <span class="nc">ThreadSupplier</span> <span class="n">consumer</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">localCounter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">localCounter</span> <span class="o">!=</span> <span class="n">counter</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">(</span><span class="s">"Licznik zmieni≈Ç warto≈õƒá na: %s"</span><span class="o">,</span> <span class="n">localCounter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>
 
        <span class="nc">CompletableFuture</span><span class="o">.</span><span class="na">allOf</span><span class="o">(</span><span class="n">supplyAsync</span><span class="o">(</span><span class="n">producer</span><span class="o">),</span> <span class="n">supplyAsync</span><span class="o">(</span><span class="n">consumer</span><span class="o">)).</span><span class="na">join</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div></div>

<p>Co robi ta klasa? Uruchamia dwa wƒÖtki: odpowiednio wƒÖtek producenta, podbijajƒÖcy raz na sekundƒô licznik, oraz wƒÖtek konsumenta, kt√≥ry w pƒôtli sprawdza czy licznik zmieni≈Ç warto≈õƒá, a je≈õli tak - wypisuje jego warto≈õƒá.</p>

<p>Jakiego wyj≈õcia na pierwszy rzut oka mo≈ºna by siƒô spodziewaƒá po odpaleniu powy≈ºszego kodu? Prawdopodobnie wielu z nas spodziewaƒá siƒô bƒôdzie efektu mniej wiƒôcej jak poni≈ºej - i wydaje siƒô to zupe≈Çnie rozsƒÖdne:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Ustawiam licznik na 1
Licznik zmieni≈Ç warto≈õƒá na: 1
Ustawiam licznik na 2
Licznik zmieni≈Ç warto≈õƒá na: 2
Ustawiam licznik na 3
Licznik zmieni≈Ç warto≈õƒá na: 3
Ustawiam licznik na 4
Licznik zmieni≈Ç warto≈õƒá na: 4
Ustawiam licznik na 5
Licznik zmieni≈Ç warto≈õƒá na: 5
</code></pre></div></div>

<p>Tymczasem jednak, po uruchomieniu tego kodu najprawdopodobniej zobaczycie takie wyj≈õcie:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Ustawiam licznik na 1
Ustawiam licznik na 2
Ustawiam licznik na 3
Ustawiam licznik na 4
Ustawiam licznik na 5
...
Ustawiam licznik na 1000
</code></pre></div></div>

<p>Co siƒô dzieje z wƒÖtkiem konsumenta, a w szczeg√≥lno≈õci, dlaczego nie podchwytuje zmian licznika? Okazuje siƒô, ≈ºe oba te wƒÖtki - producent oraz konsument - posiadajƒÖ w≈ÇasnƒÖ kopiƒô zmiennej counter. Kiedy jeden z wƒÖtk√≥w zmienia jej warto≈õƒá, to JVM oraz procesor decydujƒÖ, kiedy przepropagowaƒá jej warto≈õƒá do pozosta≈Çych wƒÖtk√≥w. W imiƒô optymalizacji taka propagacja mo≈ºe nie nastƒÖpiƒá nigdy. Jak wiƒôc naprawiƒá nasz program? Bardzo prosto, wystarczy do definicji zmiennej counter dodaƒá s≈Çowo kluczowe volatile, kt√≥re poinformuje wszystkie zainteresowane mechanizmy, ≈ºe z tej zmiennej korzysta wiƒôcej ni≈º jeden wƒÖtek, i wszelkie zmiany jej warto≈õci nale≈ºy natychmiast propagowaƒá do tych wƒÖtk√≥w:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>
</code></pre></div></div>

<p>Po takiej zmianie i ponownym uruchomieniu programu ujrzymy wyj≈õcie, kt√≥rego siƒô oryginalnie spodziewali≈õmy.</p>

<p>Jak natomiast ma siƒô to do aplikacji, kt√≥re rozwijamy na co dzie≈Ñ? Dobrym przyk≈Çadem mogƒÖ byƒá np. zmienne trzymane w sesji u≈ºytkownika, czytane i modyfikowane przez potencjalnie wiele wƒÖtk√≥w - w skrajnym przypadku mo≈ºe doj≈õƒá do sytuacji, w kt√≥rej r√≥≈ºne wƒÖtki korzystajƒÖce z takiego sesyjnego obiektu bƒôdƒÖ widzia≈Çy rozbie≈ºne jego warto≈õci, co z kolei mo≈ºe doprowadziƒá do najr√≥≈ºniejszych anomalii oraz b≈Çƒôd√≥w (szczeg√≥lnie, je≈õli jeden z tych wƒÖtk√≥w wykonuje przetwarzanie obciƒÖ≈ºajƒÖce procesor - z punktu widzenia procesora bƒôdzie to kandydat do wykonania optymalizacji polegajƒÖcej na niepropagowaniu do tego wƒÖtku nowej warto≈õci takiej zmiennej).</p>

<p>PodsumowujƒÖc, warto pamiƒôtaƒá o volatile rozwijajƒÖc wielowƒÖtkowe aplikacje, w kt√≥rych r√≥≈ºne wƒÖtki korzystajƒÖ ze wsp√≥lnych zmiennych.</p>

<p>PS. uwa≈ºny czytelnik zauwa≈ºy, ≈ºe w go≈Çej Javie nie istnieje taki interfejs funkcyjny jak ThreadSupplier - utworzy≈Çem go na potrzeby czytelno≈õci przyk≈Çadu, aby nie zaciemniaƒá kodu obs≈ÇugƒÖ wyjƒÖtku z Thread.sleep. Pe≈Çny kod ≈∫r√≥d≈Çowy tego przyk≈Çadu znajduje siƒô poni≈ºej ‚Äî polecam lekturƒô wszystkim, kt√≥rzy chcieliby siƒô dowiedzieƒá jak poradziƒá sobie z wyjƒÖtkami rzucanymi w lambdach bez u≈ºycia zewnƒôtrznych bibliotek.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">package</span> <span class="nn">com.consdata.webdev</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.CompletableFuture</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.function.Supplier</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">String</span><span class="o">.</span><span class="na">format</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">static</span> <span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">concurrent</span><span class="o">.</span><span class="na">CompletableFuture</span><span class="o">.</span><span class="na">supplyAsync</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">VolatileExample</span> <span class="o">{</span>

    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">volatile</span> <span class="kt">int</span> <span class="n">counter</span> <span class="o">=</span> <span class="mi">0</span><span class="o">;</span>

    <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="nc">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
        <span class="nc">ThreadSupplier</span> <span class="n">producer</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">(</span><span class="s">"Ustawiam licznik na %s"</span><span class="o">,</span> <span class="o">++</span><span class="n">counter</span><span class="o">));</span>
                <span class="nc">Thread</span><span class="o">.</span><span class="na">sleep</span><span class="o">(</span><span class="mi">1000</span><span class="o">);</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="nc">ThreadSupplier</span> <span class="n">consumer</span> <span class="o">=</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="kt">int</span> <span class="n">localCounter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">;</span>
            <span class="k">while</span> <span class="o">(</span><span class="kc">true</span><span class="o">)</span> <span class="o">{</span>
                <span class="k">if</span> <span class="o">(</span><span class="n">localCounter</span> <span class="o">!=</span> <span class="n">counter</span><span class="o">)</span> <span class="o">{</span>
                    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">format</span><span class="o">(</span><span class="s">"Licznik zmieni≈Ç warto≈õƒá¬†na: %s"</span><span class="o">,</span> <span class="n">localCounter</span> <span class="o">=</span> <span class="n">counter</span><span class="o">));</span>
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">};</span>

        <span class="nc">CompletableFuture</span><span class="o">.</span><span class="na">allOf</span><span class="o">(</span><span class="n">supplyAsync</span><span class="o">(</span><span class="n">producer</span><span class="o">),</span> <span class="n">supplyAsync</span><span class="o">(</span><span class="n">consumer</span><span class="o">)).</span><span class="na">join</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>

<span class="cm">/**
 * Gdyby kto≈õ¬†siƒô¬†zastanawia≈Ç dlaczego interfejs funkcyjny z dwoma metodami w og√≥le dzia≈Ça:
 * W przypadku interfejs√≥w funkcyjnych pod uwagƒô¬†brane sƒÖ¬†jedynie nieabstrakcyjne metody interfejsu.
 * Metoda interfejsu posiadajƒÖca domy≈õlnƒÖ¬†implementacjƒô¬†NIE JEST traktowana jako abstrakcyjna.
 *
 * Na podobnej zasadzie dzia≈Ça np. Consumer
 * https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/function/Consumer.html
 */</span>
<span class="nd">@FunctionalInterface</span>
<span class="kd">interface</span> <span class="nc">ThreadSupplier</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="kd">extends</span> <span class="nc">Supplier</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span> <span class="o">{</span>
    <span class="k">default</span> <span class="no">T</span> <span class="nf">get</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">try</span> <span class="o">{</span>
            <span class="k">return</span> <span class="nf">getThrows</span><span class="o">();</span>
        <span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="nc">InterruptedException</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
            <span class="c1">// W tym miejscu nale≈ºy zrobiƒá¬†co≈õ¬†sensownego z wyjƒÖtkiem - minimum zalogowaƒá.</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nf">RuntimeException</span><span class="o">(</span><span class="n">e</span><span class="o">);</span>
        <span class="o">}</span>
    <span class="o">}</span>

    <span class="no">T</span> <span class="nf">getThrows</span><span class="o">()</span> <span class="kd">throws</span> <span class="nc">InterruptedException</span><span class="o">;</span>
<span class="o">}</span>
</code></pre></div></div>

                    
                    
                    <div class="did-you-know-box">
    <span class="highlighted-box-description">
        üí° "Czy wiesz, ≈ºe?" to wewnƒÖtrzfirmowa inicjatywa, kt√≥rej celem jest szerzenie ciekawostek
        z r√≥≈ºnych obszar√≥w IT. Najlepsze z nich trafiajƒÖ na bloga dla szerszego grona odbiorc√≥w.
    </span>
</div>

                    
                    
                </div>
            </div>
            <div class="sidebar">
                
<div class="sidebar-container">
    <div class="sidebar-title">
        Newest posts
    </div>
    <div class="sidebar-latest-posts-container">
        <ul class="sidebar-posts"><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/09/13/kafka-retry-dlq.html" lang="pl">Reliable event delivery in Apache Kafka based on retry and DLQ</a>
            </li><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/09/08/kouncil-event-tracking-kafka.html" lang="pl">Event Tracking - finding a needle in a haystack</a>
            </li><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/08/30/kouncil-introduction.html" lang="pl">Kouncil - a modern Kafka frontend</a>
            </li></ul>
    </div>
</div>

                <div class="sidebar-container" id="recommended-posts-sidebar">
    <div class="sidebar-title">
        Podobne wpisy
    </div>
    <div class="sidebar-latest-posts-container">
        <ul class="sidebar-posts" id="recommended-posts-desktop">

        </ul>
    </div>
</div>

                <div class="sidebar-container" id="recommended-posts-sidebar">
    <div class="sidebar-title">
        Do≈ÇƒÖcz do nas
    </div>
    <div class="sidebar-last-posts-container">
        <ul class="sidebar-posts">
            <li class="sidebar-post no-breaking-word">
                <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/senior-fullstack-developer-java-angular"
                   lang="pl">
                    <div class="job-offer">
                        <span class="job-title">SENIOR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                        <span class="job-description">Pozna≈Ñ (hybrydowo) lub zdalnie</span>
                        <span class="job-salary">
                            UoP 14 900 - 20 590 PLN brutto <br/>
                            B2B 19 680 - 27 220 PLN netto
                        </span>
                    </div>
                </a>
            </li>
            <li class="sidebar-post no-breaking-word">
                <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/regular-fullstack-developer-java-angular"
                   lang="pl">
                    <div class="job-offer">
                        <span class="job-title">REGULAR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                        <span class="job-description">Pozna≈Ñ (hybrydowo) lub zdalnie</span>
                        <span class="job-salary">
                            UoP 11 300 - 15 900 PLN brutto <br/>
                            B2B 14 950 - 21 000 PLN netto
                        </span>
                    </div>
                </a>
            </li>
            <li class="sidebar-post no-breaking-word">
                <a class="clickable-offer" href="https://www.consdata.com/pl/kariera/trwajace-rekrutacje#tag-developer">
                    <div class="other-job-offers">
                        <span class="job-title">ZOBACZ WSZYSTKIE OG≈ÅOSZENIA</span>
                    </div>
                </a>
            </li>
        </ul>
    </div>
</div>

            </div>
        </div>
        <div class="post-post-section-mobile">
            
<div class="sidebar-container">
    <div class="sidebar-title">
        Newest posts
    </div>
    <div class="sidebar-latest-posts-container">
        <ul class="sidebar-posts"><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/09/13/kafka-retry-dlq.html" lang="pl">Reliable event delivery in Apache Kafka based on retry and DLQ</a>
            </li><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/09/08/kouncil-event-tracking-kafka.html" lang="pl">Event Tracking - finding a needle in a haystack</a>
            </li><li class="sidebar-post no-breaking-word">
                <a href="/en/2021/08/30/kouncil-introduction.html" lang="pl">Kouncil - a modern Kafka frontend</a>
            </li></ul>
    </div>
</div>

        </div>
        <div class="post-post-section-mobile">
            <div class="sidebar-container" id="recommended-posts-bottombar">
    <div class="sidebar-title">
        Podobne wpisy
    </div>
    <div class="sidebar-latest-posts-container">
        <ul class="sidebar-posts" id="recommended-posts-mobile">

        </ul>
    </div>
</div>

        </div>
        <div class="post-post-section-mobile">
            <div class="sidebar-container" id="recommended-posts-sidebar">
    <div class="sidebar-title">
        Do≈ÇƒÖcz do nas
    </div>
    <div class="sidebar-last-posts-container">
        <ul class="sidebar-posts">
            <li class="sidebar-post no-breaking-word">
                <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/senior-fullstack-developer-java-angular"
                   lang="pl">
                    <div class="job-offer">
                        <span class="job-title">SENIOR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                        <span class="job-description">Pozna≈Ñ (hybrydowo) lub zdalnie</span>
                        <span class="job-salary">
                            UoP 14 900 - 20 590 PLN brutto <br/>
                            B2B 19 680 - 27 220 PLN netto
                        </span>
                    </div>
                </a>
            </li>
            <li class="sidebar-post no-breaking-word">
                <a href="https://consdata.com/pl/kariera/trwajace-rekrutacje/poznan/regular-fullstack-developer-java-angular"
                   lang="pl">
                    <div class="job-offer">
                        <span class="job-title">REGULAR FULLSTACK DEVELOPER (JAVA + ANGULAR)</span>
                        <span class="job-description">Pozna≈Ñ (hybrydowo) lub zdalnie</span>
                        <span class="job-salary">
                            UoP 11 300 - 15 900 PLN brutto <br/>
                            B2B 14 950 - 21 000 PLN netto
                        </span>
                    </div>
                </a>
            </li>
            <li class="sidebar-post no-breaking-word">
                <a class="clickable-offer" href="https://www.consdata.com/pl/kariera/trwajace-rekrutacje#tag-developer">
                    <div class="other-job-offers">
                        <span class="job-title">ZOBACZ WSZYSTKIE OG≈ÅOSZENIA</span>
                    </div>
                </a>
            </li>
        </ul>
    </div>
</div>

        </div>
        <div class="author-bio">
    
    <div class="author-image">
        <a href="/en/authors/mmergo.html" class="author-name">
            <img src="/assets/img/authors/mmergo.webp" alt="author" width="120" height="120">
        </a>
    </div>
    
    <div class="card">
        <div class="header">
            
            <a href="/en/authors/mmergo.html" class="author-name">
                Marcin Mergo
            </a>
            
            <div class="social-buttons">
                
                <div class="author-github">
                    <a href="https://github.com/mmergo"
                       title="mmergo">
                        <svg class="svg-icon grey">
                            <use xlink:href="/assets/minima-social-icons.svg#github"></use>
                        </svg>
                        mmergo</a>
                </div>
                
            </div>
        </div>
        <div class="content">
            
                
                    <div class="bio">A graduate of the Pozna≈Ñ University of Technology, a long-time software developer for the financial sector. During his career, he created systems for the largest banks in Poland, both in the corporate and retail areas. Experienced in providing solutions for the energy industry and the public sector. A longtime employee, Tech Lead, Architect, and member of the Consdata security team. Co-organizer and speaker at OWASP meetings. Common sense enthusiast and an aspiring game developer.</div>
                
            
        </div>
    </div>
</div>
<div class="author-bio-mobile">
    <div class="header">
        
        <div class="author-image">
            <img src="/assets/img/authors/mmergo.webp">
        </div>
        
        <div class="name-wrapper">
            
            <div class="author-name">Marcin Mergo</div>
            
            <div class="social-buttons">
                
                <div class="author-github">
                    <a href="https://github.com/mmergo"
                       title="mmergo">
                        <svg class="svg-icon grey">
                            <use xlink:href="/assets/minima-social-icons.svg#github"></use>
                        </svg>
                        mmergo</a>
                </div>
                
            </div>
        </div>
    </div>
    <div class="content">
        
            
            
                <div class="bio">Absolwent Politechniki Pozna≈Ñskiej, od lat zwiƒÖzany z tworzeniem oprogramowania dla sektora finansowego. W trakcie swojej kariery tworzy≈Ç systemy dla najwiƒôkszych bank√≥w w Polsce, zar√≥wno z obszaru korporacyjnego, jak i detalicznego. Posiada do≈õwiadczenie w dostarczaniu rozwiƒÖza≈Ñ dla bran≈ºy energetycznej oraz sektora public. Wieloletni pracownik, Tech Lead, Architekt, oraz cz≈Çonek zespo≈Çu bezpiecze≈Ñstwa firmy Consdata. Wsp√≥≈Çorganizator oraz prelegent spotka≈Ñ OWASPowych. Entuzjasta zdrowego rozsƒÖdku, aspirujƒÖcy game developer.</div>
            
        
    </div>
</div>
<div id="disqus_thread"></div>
<script>
    function readCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    if (readCookie('cookie-notice-dismissed') === 'true') {
        var disqus_config = function () {
            this.page.url = 'https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html';
            this.page.identifier = 'https://blog.consdata.tech/2021/05/31/slowo-kluczowe-volatile.html';
        };

        (function () {
            var d = document, s = d.createElement('script');

            s.src = 'https://consdata-tech.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    }
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments
    powered by Disqus.</a></noscript></article>
</div>
<script>
    const language = 'en';
    const jsonPath = language === 'en' ? '/en/json/posts.json' : '/json/posts.json';
    fetch(jsonPath)
        .then(response => response.json())
        .then(store => {
            function displayResults(results) {
                if (results.length > 0) {
                    const container = document.getElementById("recommended-posts-desktop");
                    const containerMobile = document.getElementById("recommended-posts-mobile");
                    results
                        .forEach(result => {
                            const item = store[result.ref];
                            if (item.lang === language) {
                                const listElement = document.createElement('li');
                                const anchor = document.createElement('a');
                                const postTitle = document.createTextNode(item.title);
                                listElement.classList.add('sidebar-post');
                                listElement.classList.add('no-breaking-word');
                                anchor.setAttribute('href', item.url);
                                anchor.setAttribute('lang', 'pl');
                                anchor.appendChild(postTitle);
                                listElement.appendChild(anchor);
                                container.appendChild(listElement);
                                containerMobile.appendChild(listElement.cloneNode(true));
                            }
                        });
                    if (container.children.length < 1) {
                        hideRecommendedPosts();
                    }
                } else {
                    hideRecommendedPosts();
                }

            }

            const tags = "java";
            const idx = lunr(function () {
                this.field('tags');

                for (let key in store) {
                    this.add({
                        'id': key,
                        'title': store[key].title,
                        'tags': store[key].tags,
                    });
                }
            });
            const results = idx.search(tags).slice(1, 4);
            displayResults(results);
        })

    function zoomImage($event) {
        const modal = document.getElementById('myModal');
        modal.getElementsByTagName('img')[0].src = $event.target.src;
        modal.style.display = 'flex';
    }

    function closeModal() {
        document.getElementById('myModal').style.display = 'none';
    }

    function hideRecommendedPosts() {
        document.getElementById("recommended-posts-sidebar").style.display = 'none';
        document.getElementById("recommended-posts-bottombar").style.display = 'none';
    }

    const postImages = document.querySelectorAll('.post-content img');
    postImages.forEach(x => x.addEventListener('click', zoomImage));
</script>

</main><footer>
    <div class="container">
        <div class="footer-item company">
            <div class="label">
                <img src="/assets/img/logo.png"/>
            </div>
            <div class="item-content">
                <p>
                    K9OFFICE, UL. KRYSIEWICZA 9/17<br/>
                    61-825 POZNA≈É<br/>
                    POLSKA
                </p>
                <p>
                    TEL.:+48 61 41 51 000
                </p>
                <p>
                    NIP: 1822261960<br/>
                    REGON: 634422180
                </p>
            </div>
        </div>
        <div class="footer-item legals">
            <div class="label">
                INFORMATION
            </div>
            <div class="item-content">
                <p>
                    <a href="https://consdata.com/pl/polityka-prywatnosci" target="_blank">PRIVACY POLICY </a>
                </p>
            </div>
        </div>
        <div class="footer-item social-buttons">
            <div class="label">
                STAY IN TOUCH
            </div>
            <div class="item-content">
                <div class="social-buttons-container">
                    <div class="social-button-wrapper">
                        <a class="social-btn" target="_blank" href="https://www.facebook.com/consdatacom"
                           title="Facebook">
                            <i class="fa fa-facebook"></i>
                        </a>
                    </div>
                    <div class="social-button-wrapper">
                        <a class="social-btn" target="_blank"
                           href="https://www.youtube.com/channel/UCv4d_uCiLdDkOFk8NtDsU_w" title="Youtube">
                            <i class="fa fa-youtube"></i>
                        </a>
                    </div>
                    <div class="social-button-wrapper">
                        <a class="social-btn" target="_blank" href="https://www.linkedin.com/company/1456906"
                           title="Linkedin">
                            <i class="fa fa-linkedin"></i>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="copyright">
        Copyrights ¬© 2024 CONSDATA
    </div>
</footer>
<div class="cookie-notice" id="cookie-notice">
    <span>
        
        Chcemy u≈ºywaƒá plik√≥w cookie oraz skrypt√≥w podmiot√≥w trzecich do polepszania funkcjonowania tej strony
    </span>
    <a id="cookie-notice-accept" class="consent-button">Zgadzam siƒô</a>
    <i onclick="hideConsent()" class="close-consent fa fa-times close"></i>
    <noscript><img height="1" width="1" style="display:none"
                   src="https://www.facebook.com/tr?id=300808861525851&ev=PageView&noscript=1"
    /></noscript>
</div>

<script>
    function createCookie(name, value, days) {
        let expires = "";
        if (days) {
            const date = new Date();
            date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
            expires = "; expires=" + date.toUTCString();
        }
        document.cookie = name + "=" + value + expires + "; path=/";
    }

    function readCookie(name) {
        const nameEQ = name + "=";
        const ca = document.cookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) === ' ') c = c.substring(1, c.length);
            if (c.indexOf(nameEQ) === 0) return c.substring(nameEQ.length, c.length);
        }
        return null;
    }

    function eraseCookie(name) {
        createCookie(name, "", -1);
    }

    function hideConsent() {
        document.getElementById('cookie-notice').style.display = 'none';
    }

    if (readCookie('cookie-notice-dismissed') === 'true') {!function (f, b, e, v, n, t, s) {
    if (f.fbq) return;
    n = f.fbq = function () {
        n.callMethod ?
            n.callMethod.apply(n, arguments) : n.queue.push(arguments)
    };
    if (!f._fbq) f._fbq = n;
    n.push = n;
    n.loaded = !0;
    n.version = '2.0';
    n.queue = [];
    t = b.createElement(e);
    t.async = !0;
    t.src = v;
    s = b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t, s)
}(window, document, 'script',
    'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '300808861525851');
fbq('track', 'PageView');
} else {
        document.getElementById('cookie-notice').style.display = 'flex';
    }

    document.getElementById('cookie-notice-accept').addEventListener("click", function () {
        createCookie('cookie-notice-dismissed', 'true', 31);
        hideConsent();
        location.reload();
    });
</script>

</body>
</html>
